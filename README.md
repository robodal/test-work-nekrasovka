## Тестовое задание

Реализовать API для подписки на новости.
API должно выполнять следующие задачи:
- Подписка пользователя по email на нужную рубрику
- Удаление подписки на конкретную рубрику
- Удаление подписки на все рубрики
- Отображение подписок пользователя и отображение всех пользователей переданной рубрики  Эти данные должны быть доступны только после авторизации. Например через открытый\закрытый ключ с последующим использование токена. (Ключи выдаются доверенному приложению которое и будет отображать данные из API (реализация приложения не требуется))  Так как этих данных может быть много, то этим методы должны принимать дополнительные параметры limit и offset ограничивающие выдачу.

Фреймворк любой современный фреймворк подойдет

Будет плюсом реализация RESTful API

## 1. Развертывание

### 1.1. Получение кода
```php
$ git clone https://github.com/robodal/test-work-nekrasovka.git
```

### 1.2. Настройки окружения. В первую очередь реквизиты доступа к БД, остальное опционально.
```php
$ cp .env.example .env
```

### 1.3. Установка пакетов
```php
$ composer install
```

### 1.4. Запуск миграций и наполнений
```php
$ php artisan migrate:fresh --seed
```

## 2. Использование

### 2.1. Общее описание

Endpoint реализованных методов API /api/v1/.

В соответствии с заданием реализованы открытые методы подписки/отписки и закрытые методы по просмотру списков подписок и подписавшихся.

Для удобства и унификации использования методов работающих с пользователями/email возможна передача как числового уникального идентификатора, так и email.

Закрытые методы для получения списков поддерживают дополнительные параметры (GET) offset и limit для возможности постраницной выборки.

Первоначальное заполнение предполагает создание 20 пользователей и 5 рубрик с использованием генератора Faker. Один из пользователей - админ с возможностью получить токен для работы с кзакрытыми методами API, его реквизиты для авторизации: email - admin@admin.admin, пароль admin.

### 2.2. Авторизация.

Для доступа к закрытым методам из задания используется авторизация по токену Bearer.

Для получения токена реализован метод `[POST] /auth`, который получает в формате form-urlencoded два параметра: email и password.

В момент авторизации производится поиск по штатной таблице users соответствующего пользователя, проверяется его пароль и флаг возможности доступа к закрытым методам API.

В случае успешной аутентификации выдается токен, который далее необходимо передавать в заголовках при обращении к закрытым методам API `Authorization: Bearer <token>`

### 2.3. Реализованные методы

`/users/{userId}/subscribe/{rubricId}` - Подписка пользователя (по email или id) на рубрику.

`/users/{userId}/unsubscribe/{rubricId}` - Отписка пользователя (по email или id) от рубрики.

`/users/{userId}/forget` - Отписка пользователя (по email или id) от всех рубрик.

`/users/{userId}/rubrics` - Вывод списка рубрик, на которые подписан указанный пользователь (по email или id).

`/rubrics/{rubricId}/users` - Вывод списка пользователей, подписанных на указанную рубрику.

## 3. Полнота реализации

В рамках ограниченности во времени реализован только основной указанный в задании вектор функциональности. В идеале техническое задание должно содержать описание нюансов поведения приложения в случае ошибок, описание форматов переданных данных и т.д. Из того, что можно было бы реализовать, но не реализовано для сокращения времени выполнения, как минимум это:
- Создать окружение для быстрого развертывания на базе docker для удобства проверки 
- Стандартизация единого формат ответа API методов
- Обработка ошибок (соответствующие HTTP-статусы ответов и описание ошибок)
- Валидация получаемых параметров
- Разработка полноценного описания API под Swagger и/или Postman
- Добавить RESTfull для управления самими сущностями пользователя и рубрики
- Для списочных методов добавление мета-информации, как минимум о количестве записей (total) при постраничной выборке
- Обернуть тестами
и т.д.
